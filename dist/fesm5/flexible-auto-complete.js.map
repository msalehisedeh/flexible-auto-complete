{"version":3,"file":"flexible-auto-complete.js.map","sources":["ng://flexible-auto-complete/src/app/flexible-auto-complete/flexible-auto-complete.component.ts","ng://flexible-auto-complete/src/app/flexible-auto-complete/flexible-auto-complete-module.ts"],"sourcesContent":["/*\r\n* Provides rendering of a table which is using the given FlexibleTableHeader set in\r\n* order to tabulate the given data. As per definition of earch header component,\r\n* a column could be hidden, sortable, or draggable. Each table row can expand/collapse\r\n* or respond to a click action.\r\n*/\r\nimport {\r\n    Component,\r\n\tInput,\r\n\tOutput,\r\n\tAfterViewInit,\r\n\tEventEmitter,\r\n\tElementRef\r\n} from '@angular/core';\r\n\r\nimport { Http } from '@angular/http';\r\n\r\n@Component({\r\n\tselector: 'flexible-auto-complete',\r\n\ttemplateUrl: './flexible-auto-complete.component.html',\r\n\tstyleUrls: ['./flexible-auto-complete.component.scss']\r\n})\r\nexport class FlexibleAutoCompleteComponent implements AfterViewInit{\r\n\r\n\tprivate interval: any;\r\n\r\n\tentry = \"\";\r\n\tfilteredData: any[] = [];\r\n\r\n\t@Input(\"flexibleId\")\r\n\tpublic flexibleId = \"flexible\";\r\n\t\r\n\t@Input(\"placeholder\")\r\n\tpublic placeholder = \"\";\r\n\t\r\n\t@Input(\"remotepath\")\r\n\tpublic remotepath = \"body\";\r\n\t\r\n\t@Input(\"prefetchdata\")\r\n\tpublic prefetchdata = false;\r\n\t\r\n\t@Input(\"animateonresult\")\r\n\tpublic animateonresult = false;\r\n\t\r\n\t@Input(\"allowdropdown\")\r\n\tpublic allowdropdown = false;\r\n\t\r\n\t@Input('keymap')\r\n    public keymap: any[] = [];\r\n\r\n    @Input(\"icon\")\r\n    public icon = \"\";\r\n\r\n    @Input(\"message\")\r\n    public message = \"\";\r\n\r\n\t@Input(\"direction\")\r\n    public direction = \"vertical\";\r\n\r\n    @Input(\"delayby\")\r\n    public delayby = 300;\r\n\r\n    @Input(\"triggeron\")\r\n    public triggeron = 2;\r\n\r\n    @Input(\"viewport\")\r\n    public viewport = \"200px\";\r\n\r\n\t@Input(\"template\")\r\n    public template: any;\r\n\r\n    @Input(\"source\")\r\n    public source: string;\r\n\r\n    @Input(\"data\")\r\n    public data: any;\r\n\r\n\t@Output(\"onselect\")\r\n\tonselect = new EventEmitter();\r\n\r\n\t@Output(\"onsearch\")\r\n\tonsearch = new EventEmitter();\r\n\r\n\tconstructor(private http: Http, private el: ElementRef) {}\r\n\t\r\n\tngAfterViewInit() {\r\n\t\tthis.resize(false);\r\n\t\tif (this.prefetchdata && this.source) {\r\n\t\t\tthis.http.get(this.source).subscribe(\r\n\t\t\t\t(result: any) => {\r\n\t\t\t\t\tconst response = this.traverseResult(result);\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tthis.data = response;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate traverseResult(response) {\r\n\t\tconst list = this.remotepath.split(\".\");\r\n\t\tlist.map( (item) => {\r\n\t\t\tresponse = response ? response[item] : undefined;\r\n\t\t});\r\n\t\tconst x = list.length ? response : undefined;\r\n\t\treturn x && (typeof x === \"string\") ? JSON.parse(x) : x;\r\n\t}\r\n\r\n\tclickup(event, item, i, max) {\r\n\t\tconst code = event.which;\r\n\t\t\r\n\t\tif (code === 13) {\r\n\t\t\tthis.selectTab( item );\r\n\t\t} else if (code === 38) { // arrow up\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tdocument.getElementById(this.flexibleId + \"-item-\" + ( i - 1)).focus();\r\n\t\t\t} else {\r\n\t\t\t\tdocument.getElementById(this.flexibleId).focus();\r\n\t\t\t}\r\n\t\t} else if (code === 40 && i < max) { // arrow down\r\n\t\t\tdocument.getElementById(this.flexibleId + \"-item-\" + ( i + 1)).focus();\r\n\t\t}\r\n\t}\r\n\tprivate resize(flag) {\r\n\t\tif (this.animateonresult) {\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.el.nativeElement.classList.add(\"has-data\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.el.nativeElement.classList.remove(\"has-data\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.el.nativeElement.classList.add(\"has-data\");\r\n\t\t}\r\n\t}\r\n\tkeyup(event) {\r\n        const code = event.which;\r\n\t\t\r\n\t\tif (code === 13) {\r\n\t\t\tif (this.filteredData && this.filteredData.length) {\r\n\t\t\t\tthis.selectTab( this.filteredData[0] );\r\n\t\t\t}\r\n\t\t} else if (code === 38) { // arrow up\r\n\t\t\t// do nothing\r\n\t\t} else if (code === 40) { // arrow down\r\n\t\t\tif (this.filteredData && this.filteredData.length){\r\n\t\t\t\tdocument.getElementById(this.flexibleId + \"-item-1\").focus();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.entry = event.target.value;\r\n\t\t\tif (this.interval) {\r\n\t\t\t\tclearTimeout(this.interval);\r\n\t\t\t}\r\n\t\t\tthis.interval = setTimeout( () => {\r\n\t\t\t\tconst key = this.entry.toLowerCase();\r\n\t\t\t\tif (key.length > this.triggeron) {\r\n\t\t\t\t\tif (!this.prefetchdata && this.source) {\r\n\t\t\t\t\t\tthis.http.get(this.source + key).subscribe(\r\n\t\t\t\t\t\t\t(result: any) => {\r\n\t\t\t\t\t\t\t\tconst response = this.traverseResult(result);\r\n\t\t\t\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\t\t\t\tthis.data = response;\r\n\t\t\t\t\t\t\t\t\tthis.filteredData = response;\r\n\t\t\t\t\t\t\t\t\tif (this.filteredData.length) {\r\n\t\t\t\t\t\t\t\t\t\tthis.onsearch.emit(key);\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(()=> this.resize(true), 66);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if (this.data) {\r\n\t\t\t\t\t\tthis.filteredData = this.data.filter( (item) => {\r\n\t\t\t\t\t\t\tlet keep = false;\r\n\t\t\t\t\t\t\tfor(let j = 0; j < this.keymap.length; j++) {\r\n\t\t\t\t\t\t\t\tconst k = this.keymap[j];\r\n\t\t\t\t\t\t\t\tlet tmp = item[k]\r\n\t\t\t\t\t\t\t\tconst v = tmp ? tmp.toLowerCase() : undefined;\r\n\t\t\t\t\t\t\t\tif (v && v.indexOf(key) >= 0) {\r\n\t\t\t\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn keep;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (this.filteredData.length) {\r\n\t\t\t\t\t\t\tthis.onsearch.emit(key);\r\n\t\t\t\t\t\t\tsetTimeout(()=> this.resize(true), 66);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.filteredData = [];\r\n\t\t\t\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\t\t\t}\r\n\t\t\t}, this.delayby);\r\n\t\t}\r\n\t}\r\n\tselectTab(item) {\r\n\t\tthis.onselect.emit(item);\r\n\t\tthis.filteredData = [];\r\n\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\tthis.entry = \"\";\r\n\t}\r\n}\r\n","/*\r\n* Provides rendering of flexible tabs in a lazy load fashion.\r\n*/\r\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpModule } from '@angular/http';\r\n\r\nimport { FlexibleAutoCompleteComponent } from './flexible-auto-complete.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        HttpModule\r\n    ],\r\n    declarations: [\r\n        FlexibleAutoCompleteComponent\r\n    ],\r\n    exports: [\r\n        FlexibleAutoCompleteComponent\r\n    ],\r\n    entryComponents: [\r\n    ],\r\n    providers: [\r\n    ],\r\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class FlexibleAutoCompleteModule {}\r\n"],"names":[],"mappings":"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"}
