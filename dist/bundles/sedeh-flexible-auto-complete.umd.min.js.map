{"version":3,"sources":["ng://@sedeh/flexible-auto-complete/src/app/flexible-auto-complete/flexible-auto-complete.component.ts","ng://@sedeh/flexible-auto-complete/src/app/flexible-auto-complete/flexible-auto-complete-module.ts"],"names":["FlexibleAutoCompleteComponent","http","el","this","EventEmitter","prototype","ngAfterViewInit","_this","resize","prefetchdata","source","get","subscribe","result","response","traverseResult","data","list","remotepath","split","map","item","undefined","x","length","JSON","parse","clickup","event","i","max","code","which","selectTab","document","getElementById","flexibleId","focus","flag","animateonresult","nativeElement","classList","add","remove","keyup","filteredData","entry","target","value","interval","clearTimeout","setTimeout","key","toLowerCase","triggeron","onsearch","emit","filter","keep","j","keymap","tmp","v","indexOf","delayby","onselect","Component","args","selector","template","Http","ElementRef","Input","Output","FlexibleAutoCompleteModule","NgModule","imports","CommonModule","HttpModule","declarations","exports","entryComponents","providers","schemas","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"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","sourcesContent":["/*\r\n* Provides rendering of a table which is using the given FlexibleTableHeader set in\r\n* order to tabulate the given data. As per definition of earch header component,\r\n* a column could be hidden, sortable, or draggable. Each table row can expand/collapse\r\n* or respond to a click action.\r\n*/\r\nimport {\r\n    Component,\r\n\tInput,\r\n\tOutput,\r\n\tAfterViewInit,\r\n\tEventEmitter,\r\n\tElementRef\r\n} from '@angular/core';\r\n\r\nimport { Http } from '@angular/http';\r\n\r\n@Component({\r\n\tselector: 'flexible-auto-complete',\r\n\ttemplateUrl: './flexible-auto-complete.component.html',\r\n\tstyleUrls: ['./flexible-auto-complete.component.scss']\r\n})\r\nexport class FlexibleAutoCompleteComponent implements AfterViewInit{\r\n\r\n\tprivate interval: any;\r\n\r\n\tentry = \"\";\r\n\tfilteredData: any[] = [];\r\n\r\n\t@Input(\"flexibleId\")\r\n\tpublic flexibleId = \"flexible\";\r\n\t\r\n\t@Input(\"placeholder\")\r\n\tpublic placeholder = \"\";\r\n\t\r\n\t@Input(\"remotepath\")\r\n\tpublic remotepath = \"body\";\r\n\t\r\n\t@Input(\"prefetchdata\")\r\n\tpublic prefetchdata = false;\r\n\t\r\n\t@Input(\"animateonresult\")\r\n\tpublic animateonresult = false;\r\n\t\r\n\t@Input(\"allowdropdown\")\r\n\tpublic allowdropdown = false;\r\n\t\r\n\t@Input('keymap')\r\n    public keymap: any[] = [];\r\n\r\n    @Input(\"icon\")\r\n    public icon = \"\";\r\n\r\n    @Input(\"message\")\r\n    public message = \"\";\r\n\r\n\t@Input(\"direction\")\r\n    public direction = \"vertical\";\r\n\r\n    @Input(\"delayby\")\r\n    public delayby = 300;\r\n\r\n    @Input(\"triggeron\")\r\n    public triggeron = 2;\r\n\r\n    @Input(\"viewport\")\r\n    public viewport = \"200px\";\r\n\r\n\t@Input(\"template\")\r\n    public template: any;\r\n\r\n    @Input(\"source\")\r\n    public source: string;\r\n\r\n    @Input(\"data\")\r\n    public data: any;\r\n\r\n\t@Output(\"onselect\")\r\n\tonselect = new EventEmitter();\r\n\r\n\t@Output(\"onsearch\")\r\n\tonsearch = new EventEmitter();\r\n\r\n\tconstructor(private http: Http, private el: ElementRef) {}\r\n\t\r\n\tngAfterViewInit() {\r\n\t\tthis.resize(false);\r\n\t\tif (this.prefetchdata && this.source) {\r\n\t\t\tthis.http.get(this.source).subscribe(\r\n\t\t\t\t(result: any) => {\r\n\t\t\t\t\tconst response = this.traverseResult(result);\r\n\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\tthis.data = response;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate traverseResult(response) {\r\n\t\tconst list = this.remotepath.split(\".\");\r\n\t\tlist.map( (item) => {\r\n\t\t\tresponse = response ? response[item] : undefined;\r\n\t\t});\r\n\t\tconst x = list.length ? response : undefined;\r\n\t\treturn x && (typeof x === \"string\") ? JSON.parse(x) : x;\r\n\t}\r\n\r\n\tclickup(event, item, i, max) {\r\n\t\tconst code = event.which;\r\n\t\t\r\n\t\tif (code === 13) {\r\n\t\t\tthis.selectTab( item );\r\n\t\t} else if (code === 38) { // arrow up\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tdocument.getElementById(this.flexibleId + \"-item-\" + ( i - 1)).focus();\r\n\t\t\t} else {\r\n\t\t\t\tdocument.getElementById(this.flexibleId).focus();\r\n\t\t\t}\r\n\t\t} else if (code === 40 && i < max) { // arrow down\r\n\t\t\tdocument.getElementById(this.flexibleId + \"-item-\" + ( i + 1)).focus();\r\n\t\t}\r\n\t}\r\n\tprivate resize(flag) {\r\n\t\tif (this.animateonresult) {\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.el.nativeElement.classList.add(\"has-data\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.el.nativeElement.classList.remove(\"has-data\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.el.nativeElement.classList.add(\"has-data\");\r\n\t\t}\r\n\t}\r\n\tkeyup(event) {\r\n        const code = event.which;\r\n\t\t\r\n\t\tif (code === 13) {\r\n\t\t\tif (this.filteredData && this.filteredData.length) {\r\n\t\t\t\tthis.selectTab( this.filteredData[0] );\r\n\t\t\t}\r\n\t\t} else if (code === 38) { // arrow up\r\n\t\t\t// do nothing\r\n\t\t} else if (code === 40) { // arrow down\r\n\t\t\tif (this.filteredData && this.filteredData.length){\r\n\t\t\t\tdocument.getElementById(this.flexibleId + \"-item-0\").focus();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.entry = event.target.value;\r\n\t\t\tif (this.interval) {\r\n\t\t\t\tclearTimeout(this.interval);\r\n\t\t\t}\r\n\t\t\tthis.interval = setTimeout( () => {\r\n\t\t\t\tconst key = this.entry.toLowerCase();\r\n\t\t\t\tif (key.length > this.triggeron) {\r\n\t\t\t\t\tif (!this.prefetchdata && this.source) {\r\n\t\t\t\t\t\tthis.http.get(this.source + key).subscribe(\r\n\t\t\t\t\t\t\t(result: any) => {\r\n\t\t\t\t\t\t\t\tconst response = this.traverseResult(result);\r\n\t\t\t\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\t\t\t\tthis.data = response;\r\n\t\t\t\t\t\t\t\t\tthis.filteredData = response;\r\n\t\t\t\t\t\t\t\t\tif (this.filteredData.length) {\r\n\t\t\t\t\t\t\t\t\t\tthis.onsearch.emit(key);\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(()=> this.resize(true), 66);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if (this.data) {\r\n\t\t\t\t\t\tthis.filteredData = this.data.filter( (item) => {\r\n\t\t\t\t\t\t\tlet keep = false;\r\n\t\t\t\t\t\t\tfor(let j = 0; j < this.keymap.length; j++) {\r\n\t\t\t\t\t\t\t\tconst k = this.keymap[j];\r\n\t\t\t\t\t\t\t\tlet tmp = item[k]\r\n\t\t\t\t\t\t\t\tconst v = tmp ? tmp.toLowerCase() : undefined;\r\n\t\t\t\t\t\t\t\tif (v && v.indexOf(key) >= 0) {\r\n\t\t\t\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn keep;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (this.filteredData.length) {\r\n\t\t\t\t\t\t\tthis.onsearch.emit(key);\r\n\t\t\t\t\t\t\tsetTimeout(()=> this.resize(true), 66);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.filteredData = [];\r\n\t\t\t\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\t\t\t}\r\n\t\t\t}, this.delayby);\r\n\t\t}\r\n\t}\r\n\tselectTab(item) {\r\n\t\tthis.onselect.emit(item);\r\n\t\tthis.filteredData = [];\r\n\t\tsetTimeout(()=> this.resize(false), 66);\r\n\t\tthis.entry = \"\";\r\n\t}\r\n}\r\n","/*\r\n* Provides rendering of flexible tabs in a lazy load fashion.\r\n*/\r\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpModule } from '@angular/http';\r\n\r\nimport { FlexibleAutoCompleteComponent } from './flexible-auto-complete.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        HttpModule\r\n    ],\r\n    declarations: [\r\n        FlexibleAutoCompleteComponent\r\n    ],\r\n    exports: [\r\n        FlexibleAutoCompleteComponent\r\n    ],\r\n    entryComponents: [\r\n    ],\r\n    providers: [\r\n    ],\r\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class FlexibleAutoCompleteModule {}\r\n"]}