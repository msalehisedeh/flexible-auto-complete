!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/http"),require("@angular/common")):"function"==typeof define&&define.amd?define("@sedeh/flexible-auto-complete",["exports","@angular/core","@angular/http","@angular/common"],t):t(((e=e||self).sedeh=e.sedeh||{},e.sedeh["flexible-auto-complete"]={}),e.ng.core,e.ng.http,e.ng.common)}(this,(function(e,t,o,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function r(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a}var n=function(){function e(e,o){this.http=e,this.el=o,this.entry="",this.filteredData=[],this.flexibleId="flexible",this.placeholder="",this.remotepath="body",this.prefetchdata=!1,this.animateonresult=!1,this.allowdropdown=!1,this.keymap=[],this.icon="",this.message="",this.direction="vertical",this.delayby=300,this.triggeron=2,this.viewport="200px",this.onselect=new t.EventEmitter,this.onsearch=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;this.resize(!1),this.prefetchdata&&this.source&&this.http.get(this.source).subscribe((function(t){var o=e.traverseResult(t);o&&(e.data=o)}))},e.prototype.traverseResult=function(e){var t=this.remotepath.split(".");t.map((function(t){e=e?e[t]:void 0}));var o=t.length?e:void 0;return o&&"string"==typeof o?JSON.parse(o):o},e.prototype.clickup=function(e,t,o,i){var r=e.which;13===r?this.selectTab(t):38===r?o>0?document.getElementById(this.flexibleId+"-item-"+(o-1)).focus():document.getElementById(this.flexibleId).focus():40===r&&o<i&&document.getElementById(this.flexibleId+"-item-"+(o+1)).focus()},e.prototype.resize=function(e){this.animateonresult?e?this.el.nativeElement.classList.add("has-data"):this.el.nativeElement.classList.remove("has-data"):this.el.nativeElement.classList.add("has-data")},e.prototype.keyup=function(e){var t=this,o=e.which;13===o?this.filteredData&&this.filteredData.length&&this.selectTab(this.filteredData[0]):38===o||(40===o?this.filteredData&&this.filteredData.length&&document.getElementById(this.flexibleId+"-item-0").focus():(this.entry=e.target.value,this.interval&&clearTimeout(this.interval),this.interval=setTimeout((function(){var e=t.entry.toLowerCase();e.length>t.triggeron?!t.prefetchdata&&t.source?t.http.get(t.source+e).subscribe((function(o){var i=t.traverseResult(o);i&&(t.data=i,t.filteredData=i,t.filteredData.length?(t.onsearch.emit(e),setTimeout((function(){return t.resize(!0)}),66)):setTimeout((function(){return t.resize(!1)}),66))})):t.data&&(t.filteredData=t.data.filter((function(o){for(var i=!1,r=0;r<t.keymap.length;r++){var n=o[t.keymap[r]],a=n?n.toLowerCase():void 0;if(a&&a.indexOf(e)>=0){i=!0;break}}return i})),t.filteredData.length?(t.onsearch.emit(e),setTimeout((function(){return t.resize(!0)}),66)):setTimeout((function(){return t.resize(!1)}),66)):(t.filteredData=[],setTimeout((function(){return t.resize(!1)}),66))}),this.delayby)))},e.prototype.selectTab=function(e){var t=this;this.onselect.emit(e),this.filteredData=[],setTimeout((function(){return t.resize(!1)}),66),this.entry=""},e.ctorParameters=function(){return[{type:o.Http},{type:t.ElementRef}]},r([t.Input("flexibleId")],e.prototype,"flexibleId",void 0),r([t.Input("placeholder")],e.prototype,"placeholder",void 0),r([t.Input("remotepath")],e.prototype,"remotepath",void 0),r([t.Input("prefetchdata")],e.prototype,"prefetchdata",void 0),r([t.Input("animateonresult")],e.prototype,"animateonresult",void 0),r([t.Input("allowdropdown")],e.prototype,"allowdropdown",void 0),r([t.Input("keymap")],e.prototype,"keymap",void 0),r([t.Input("icon")],e.prototype,"icon",void 0),r([t.Input("message")],e.prototype,"message",void 0),r([t.Input("direction")],e.prototype,"direction",void 0),r([t.Input("delayby")],e.prototype,"delayby",void 0),r([t.Input("triggeron")],e.prototype,"triggeron",void 0),r([t.Input("viewport")],e.prototype,"viewport",void 0),r([t.Input("template")],e.prototype,"template",void 0),r([t.Input("source")],e.prototype,"source",void 0),r([t.Input("data")],e.prototype,"data",void 0),r([t.Output("onselect")],e.prototype,"onselect",void 0),r([t.Output("onsearch")],e.prototype,"onsearch",void 0),e=r([t.Component({selector:"flexible-auto-complete",template:'\r\n<label [for]="flexibleId">\r\n    <span class="off-screen" [textContent]="message"></span>\r\n    <input [value]="entry"\r\n        [placeholder]= "placeholder"\r\n\t\t[id]="flexibleId"\r\n        (keyup)="keyup($event)" />\r\n    <span [class]="icon ? icon : null" *ngIf="filteredData.length == 0" [class.icon]="true" area-hidden="true"></span>\r\n    <span class="icon fa fa-reply" *ngIf="icon && filteredData.length" area-hidden="true"></span>\r\n</label>\r\n<ul *ngIf="filteredData.length" \r\n    role="list" \r\n    class="viewport" \r\n    [class.fix-height]="allowdropdown"\r\n    [style.max-width]="direction === \'horizontal\' ? viewport : null"\r\n    [style.overflow-x]="direction === \'horizontal\' ? \'auto\' : null"\r\n    [style.flex-direction]="direction === \'horizontal\' ? \'row\' : \'column\'"\r\n    [style.max-height]="direction === \'vertical\' ? viewport : null"\r\n    [style.overflow-y]="direction === \'vertical\' ? \'auto\' : null">\r\n    <li \r\n        *ngFor="let item of filteredData; let i = index" \r\n        role="listitem" \r\n        tabindex="0" \r\n        [id]="flexibleId +\'-item-\' + i" \r\n        (keyup)="clickup($event, item, i, filteredData.length)" \r\n        (click)="selectTab(item)">\r\n        <ng-container  \r\n            [ngTemplateOutlet]="template ? template : defaultTemplate" \r\n            [ngTemplateOutletContext]="{data: item}"></ng-container>\r\n        <span class="icon fa fa-reply" area-hidden="true"></span>\r\n    </li>\r\n</ul>\r\n\r\n<ng-template #defaultTemplate let-detail="data">\r\n  <span *ngFor="let x of keymap" [textContent]="detail[x] + \'&nbsp;\'"></span>\r\n</ng-template>\r\n',styles:[":host{display:table;position:relative}:host.has-data{transition:width 3s ease-in-out;width:100%}:host label{display:flex;flex-direction:row;border:1px solid #ddd;padding:2px;height:22px;vertical-align:top;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,.16),0 0 0 1px rgba(0,0,0,.08);transition:box-shadow .2s cubic-bezier(.4,0,.2,1)}:host label input{flex:1;border:0;padding-left:16px}:host label .icon{flex:0 0 15px;margin-right:5px;margin-top:3px;color:#ddd}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .viewport{box-sizing:border-box;list-style-type:none;display:flex;margin:0;padding:0;z-index:2;border:1px solid #ddd;border-radius:2px;background-color:#fff;overflow:hidden;width:100%;transition:height 3s ease-in-out}:host .viewport.fix-height{position:absolute}:host .viewport li{box-sizing:border-box;white-space:nowrap;background-color:#fdfeff;padding:2px 5px;position:relative}:host .viewport li:hover{background-color:#ff3e58}:host .viewport li:focus{background-color:#3e8bff}:host .viewport li .icon{color:#fff;display:block;right:0;top:5px;position:absolute;margin-right:10px}"]})],e)}(),a=function(){function e(){}return e=r([t.NgModule({imports:[i.CommonModule,o.HttpModule],declarations:[n],exports:[n],entryComponents:[],providers:[],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]})],e)}();e.FlexibleAutoCompleteComponent=n,e.FlexibleAutoCompleteModule=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sedeh-flexible-auto-complete.umd.min.js.map