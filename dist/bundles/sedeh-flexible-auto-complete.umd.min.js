!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/http"),require("@angular/common")):"function"==typeof define&&define.amd?define("@sedeh/flexible-auto-complete",["exports","@angular/core","@angular/http","@angular/common"],t):t((e.sedeh=e.sedeh||{},e.sedeh["flexible-auto-complete"]={}),e.ng.core,e.ng.http,e.ng.common)}(this,function(e,r,t,i){"use strict";var n=function(){function e(e,t){this.http=e,this.el=t,this.entry="",this.filteredData=[],this.flexibleId="flexible",this.placeholder="",this.remotepath="body",this.prefetchdata=!1,this.animateonresult=!1,this.allowdropdown=!1,this.keymap=[],this.icon="",this.message="",this.direction="vertical",this.delayby=300,this.triggeron=2,this.viewport="200px",this.onselect=new r.EventEmitter,this.onsearch=new r.EventEmitter}return e.prototype.ngAfterViewInit=function(){var r=this;this.resize(!1),this.prefetchdata&&this.source&&this.http.get(this.source).subscribe(function(e){var t=r.traverseResult(e);t&&(r.data=t)})},e.prototype.traverseResult=function(t){var e=this.remotepath.split(".");e.map(function(e){t=t?t[e]:undefined});var r=e.length?t:undefined;return r&&"string"==typeof r?JSON.parse(r):r},e.prototype.clickup=function(e,t,r,i){var n=e.which;13===n?this.selectTab(t):38===n?0<r?document.getElementById(this.flexibleId+"-item-"+(r-1)).focus():document.getElementById(this.flexibleId).focus():40===n&&r<i&&document.getElementById(this.flexibleId+"-item-"+(r+1)).focus()},e.prototype.resize=function(e){this.animateonresult?e?this.el.nativeElement.classList.add("has-data"):this.el.nativeElement.classList.remove("has-data"):this.el.nativeElement.classList.add("has-data")},e.prototype.keyup=function(e){var a=this,t=e.which;13===t?this.filteredData&&this.filteredData.length&&this.selectTab(this.filteredData[0]):38===t||(40===t?this.filteredData&&this.filteredData.length&&document.getElementById(this.flexibleId+"-item-0").focus():(this.entry=e.target.value,this.interval&&clearTimeout(this.interval),this.interval=setTimeout(function(){var o=a.entry.toLowerCase();o.length>a.triggeron?!a.prefetchdata&&a.source?a.http.get(a.source+o).subscribe(function(e){var t=a.traverseResult(e);t&&(a.data=t,a.filteredData=t,a.filteredData.length?(a.onsearch.emit(o),setTimeout(function(){return a.resize(!0)},66)):setTimeout(function(){return a.resize(!1)},66))}):a.data&&(a.filteredData=a.data.filter(function(e){for(var t=!1,r=0;r<a.keymap.length;r++){var i=e[a.keymap[r]],n=i?i.toLowerCase():undefined;if(n&&0<=n.indexOf(o)){t=!0;break}}return t}),a.filteredData.length?(a.onsearch.emit(o),setTimeout(function(){return a.resize(!0)},66)):setTimeout(function(){return a.resize(!1)},66)):(a.filteredData=[],setTimeout(function(){return a.resize(!1)},66))},this.delayby)))},e.prototype.selectTab=function(e){var t=this;this.onselect.emit(e),this.filteredData=[],setTimeout(function(){return t.resize(!1)},66),this.entry=""},e.decorators=[{type:r.Component,args:[{selector:"flexible-auto-complete",template:'\r\n<label [for]="flexibleId">\r\n    <span class="off-screen" [textContent]="message"></span>\r\n    <input [value]="entry"\r\n        [placeholder]= "placeholder"\r\n\t\t[id]="flexibleId"\r\n        (keyup)="keyup($event)" />\r\n    <span [class]="icon ? icon : null" *ngIf="filteredData.length == 0" [class.icon]="true" area-hidden="true"></span>\r\n    <span class="icon fa fa-reply" *ngIf="icon && filteredData.length" area-hidden="true"></span>\r\n</label>\r\n<ul *ngIf="filteredData.length" \r\n    role="list" \r\n    class="viewport" \r\n    [class.fix-height]="allowdropdown"\r\n    [style.max-width]="direction === \'horizontal\' ? viewport : null"\r\n    [style.overflow-x]="direction === \'horizontal\' ? \'auto\' : null"\r\n    [style.flex-direction]="direction === \'horizontal\' ? \'row\' : \'column\'"\r\n    [style.max-height]="direction === \'vertical\' ? viewport : null"\r\n    [style.overflow-y]="direction === \'vertical\' ? \'auto\' : null">\r\n    <li \r\n        *ngFor="let item of filteredData; let i = index" \r\n        role="listitem" \r\n        tabindex="0" \r\n        [id]="flexibleId +\'-item-\' + i" \r\n        (keyup)="clickup($event, item, i, filteredData.length)" \r\n        (click)="selectTab(item)">\r\n        <ng-container  \r\n            [ngTemplateOutlet]="template ? template : defaultTemplate" \r\n            [ngTemplateOutletContext]="{data: item}"></ng-container>\r\n        <span class="icon fa fa-reply" area-hidden="true"></span>\r\n    </li>\r\n</ul>\r\n\r\n<ng-template #defaultTemplate let-detail="data">\r\n  <span *ngFor="let x of keymap" [textContent]="detail[x] + \'&nbsp;\'"></span>\r\n</ng-template>\r\n',styles:[":host{display:table;position:relative}:host.has-data{transition:width 3s ease-in-out;width:100%}:host label{display:flex;flex-direction:row;border:1px solid #ddd;padding:2px;height:22px;vertical-align:top;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,.16),0 0 0 1px rgba(0,0,0,.08);transition:box-shadow .2s cubic-bezier(.4,0,.2,1)}:host label input{flex:1;border:0;padding-left:16px}:host label .icon{flex:0 0 15px;margin-right:5px;margin-top:3px;color:#ddd}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .viewport{box-sizing:border-box;list-style-type:none;display:flex;margin:0;padding:0;z-index:2;border:1px solid #ddd;border-radius:2px;background-color:#fff;overflow:hidden;width:100%;transition:height 3s ease-in-out}:host .viewport.fix-height{position:absolute}:host .viewport li{box-sizing:border-box;white-space:nowrap;background-color:#fdfeff;padding:2px 5px;position:relative}:host .viewport li:hover{background-color:#ff3e58}:host .viewport li:focus{background-color:#3e8bff}:host .viewport li .icon{color:#fff;display:block;right:0;top:5px;position:absolute;margin-right:10px}"]}]}],e.ctorParameters=function(){return[{type:t.Http},{type:r.ElementRef}]},e.propDecorators={flexibleId:[{type:r.Input,args:["flexibleId"]}],placeholder:[{type:r.Input,args:["placeholder"]}],remotepath:[{type:r.Input,args:["remotepath"]}],prefetchdata:[{type:r.Input,args:["prefetchdata"]}],animateonresult:[{type:r.Input,args:["animateonresult"]}],allowdropdown:[{type:r.Input,args:["allowdropdown"]}],keymap:[{type:r.Input,args:["keymap"]}],icon:[{type:r.Input,args:["icon"]}],message:[{type:r.Input,args:["message"]}],direction:[{type:r.Input,args:["direction"]}],delayby:[{type:r.Input,args:["delayby"]}],triggeron:[{type:r.Input,args:["triggeron"]}],viewport:[{type:r.Input,args:["viewport"]}],template:[{type:r.Input,args:["template"]}],source:[{type:r.Input,args:["source"]}],data:[{type:r.Input,args:["data"]}],onselect:[{type:r.Output,args:["onselect"]}],onsearch:[{type:r.Output,args:["onsearch"]}]},e}(),o=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[i.CommonModule,t.HttpModule],declarations:[n],exports:[n],entryComponents:[],providers:[],schemas:[r.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.FlexibleAutoCompleteComponent=n,e.FlexibleAutoCompleteModule=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sedeh-flexible-auto-complete.umd.min.js.map