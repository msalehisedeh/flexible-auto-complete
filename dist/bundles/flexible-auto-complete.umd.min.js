!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/http"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/http","@angular/common"],t):t(e["flexible-auto-complete"]={},e.ng.core,e.ng.http,e.ng.common)}(this,function(e,i,t,n){"use strict";var o=function(){function e(e,t){this.http=e,this.el=t,this.entry="",this.filteredData=[],this.placeholder="",this.remotepath="body",this.prefetchdata=!1,this.animateonresult=!1,this.allowdropdown=!1,this.keymap=[],this.icon="",this.message="",this.direction="vertical",this.delayby=300,this.triggeron=2,this.viewport="200px",this.onselect=new i.EventEmitter,this.onsearch=new i.EventEmitter}return e.prototype.ngAfterViewInit=function(){var i=this;this.resize(!1),this.prefetchdata&&this.source&&this.http.get(this.source).subscribe(function(e){var t=i.traverseResult(e);t&&(i.data=t)})},e.prototype.traverseResult=function(t){var e=this.remotepath.split(".");e.map(function(e){t=t?t[e]:undefined});var i=e.length?t:undefined;return i&&"string"==typeof i?JSON.parse(i):i},e.prototype.clickup=function(e,t,i,n){var o=e.which;13===o?this.selectTab(t):38===o&&0<i?document.getElementById("item"+(i-1)).focus():40===o&&i<n&&document.getElementById("item"+(i+1)).focus()},e.prototype.resize=function(e){this.animateonresult?e?this.el.nativeElement.classList.add("has-data"):this.el.nativeElement.classList.remove("has-data"):this.el.nativeElement.classList.add("has-data")},e.prototype.keyup=function(e){var r=this;13===e.which?this.filteredData&&this.filteredData.length&&this.selectTab(this.filteredData[0]):(this.entry=e.target.value,this.interval&&clearTimeout(this.interval),this.interval=setTimeout(function(){var a=r.entry.toLowerCase();a.length>r.triggeron?!r.prefetchdata&&r.source?r.http.get(r.source+a).subscribe(function(e){var t=r.traverseResult(e);t&&(r.data=t,r.filteredData=t,r.filteredData.length?(r.onsearch.emit(a),setTimeout(function(){return r.resize(!0)},66)):setTimeout(function(){return r.resize(!1)},66))}):r.data&&(r.filteredData=r.data.filter(function(e){for(var t=!1,i=0;i<r.keymap.length;i++){var n=e[r.keymap[i]],o=n?n.toLowerCase():undefined;if(o&&0<=o.indexOf(a)){t=!0;break}}return t}),r.filteredData.length?(r.onsearch.emit(a),setTimeout(function(){return r.resize(!0)},66)):setTimeout(function(){return r.resize(!1)},66)):(r.filteredData=[],setTimeout(function(){return r.resize(!1)},66))},this.delayby))},e.prototype.selectTab=function(e){var t=this;this.onselect.emit(e),this.filteredData=[],setTimeout(function(){return t.resize(!1)},66),this.entry=""},e}();o.decorators=[{type:i.Component,args:[{selector:"flexible-auto-complete",template:'\n<label for="">\n    <span class="off-screen" [textContent]="message"></span>\n    <input [value]="entry"\n        [placeholder]= "placeholder"\n        (keyup)="keyup($event)" />\n    <span [class]="icon ? icon : null" *ngIf="filteredData.length == 0" [class.icon]="true" area-hidden="true"></span>\n    <span class="icon fa fa-reply" *ngIf="icon && filteredData.length" area-hidden="true"></span>\n</label>\n<ul *ngIf="filteredData.length"\n    role="list"\n    class="viewport"\n    [class.fix-height]="allowdropdown"\n    [style.max-width]="direction === \'horizontal\' ? viewport : null"\n    [style.overflow-x]="direction === \'horizontal\' ? \'auto\' : null"\n    [style.flex-direction]="direction === \'horizontal\' ? \'row\' : \'column\'"\n    [style.max-height]="direction === \'vertical\' ? viewport : null"\n    [style.overflow-y]="direction === \'vertical\' ? \'auto\' : null">\n    <li\n        *ngFor="let item of filteredData; let i = index"\n        role="listitem"\n        tabindex="0"\n        [id]="\'item\' + i"\n        (keyup)="clickup($event, item, i, filteredData.length)"\n        (click)="selectTab(item)">\n        <ng-container\n            [ngTemplateOutlet]="template ? template : defaultTemplate"\n            [ngTemplateOutletContext]="{data: item}"></ng-container>\n        <span class="icon fa fa-reply" area-hidden="true"></span>\n    </li>\n</ul>\n<ng-template #defaultTemplate let-detail="data">\n  <span *ngFor="let x of keymap" [textContent]="detail[x] + \'&nbsp;\'"></span>\n</ng-template>\n',styles:[":host{display:table;position:relative}:host.has-data{-webkit-transition:width 3s ease-in-out;transition:width 3s ease-in-out;width:100%}:host label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border:1px solid #ddd;padding:2px;height:22px;vertical-align:top;border-radius:2px;-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,.16),0 0 0 1px rgba(0,0,0,.08);box-shadow:0 2px 2px 0 rgba(0,0,0,.16),0 0 0 1px rgba(0,0,0,.08);-webkit-transition:-webkit-box-shadow .2s cubic-bezier(.4,0,.2,1);transition:-webkit-box-shadow .2s cubic-bezier(.4,0,.2,1);transition:box-shadow .2s cubic-bezier(.4,0,.2,1);transition:box-shadow .2s cubic-bezier(.4,0,.2,1),-webkit-box-shadow .2s cubic-bezier(.4,0,.2,1)}:host label input{-webkit-box-flex:1;-ms-flex:1;flex:1;border:0;padding-left:16px}:host label .icon{-webkit-box-flex:0;-ms-flex:0 0 15px;flex:0 0 15px;margin-right:5px;margin-top:3px;color:#ddd}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .viewport{-webkit-box-sizing:border-box;box-sizing:border-box;list-style-type:none;display:-webkit-box;display:-ms-flexbox;display:flex;margin:0;padding:0;z-index:2;border:1px solid #ddd;border-radius:2px;background-color:#fff;overflow:hidden;width:100%;-webkit-transition:height 3s ease-in-out;transition:height 3s ease-in-out}:host .viewport.fix-height{position:absolute}:host .viewport li{-webkit-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;background-color:#fdfeff;padding:2px 5px;position:relative}:host .viewport li:hover{background-color:#ff3e58}:host .viewport li:focus{background-color:#3e8bff}:host .viewport li .icon{color:#fff;display:block;right:0;top:5px;position:absolute;margin-right:10px}"]}]}],o.ctorParameters=function(){return[{type:t.Http},{type:i.ElementRef}]},o.propDecorators={placeholder:[{type:i.Input,args:["placeholder"]}],remotepath:[{type:i.Input,args:["remotepath"]}],prefetchdata:[{type:i.Input,args:["prefetchdata"]}],animateonresult:[{type:i.Input,args:["animateonresult"]}],allowdropdown:[{type:i.Input,args:["allowdropdown"]}],keymap:[{type:i.Input,args:["keymap"]}],icon:[{type:i.Input,args:["icon"]}],message:[{type:i.Input,args:["message"]}],direction:[{type:i.Input,args:["direction"]}],delayby:[{type:i.Input,args:["delayby"]}],triggeron:[{type:i.Input,args:["triggeron"]}],viewport:[{type:i.Input,args:["viewport"]}],template:[{type:i.Input,args:["template"]}],source:[{type:i.Input,args:["source"]}],data:[{type:i.Input,args:["data"]}],onselect:[{type:i.Output,args:["onselect"]}],onsearch:[{type:i.Output,args:["onsearch"]}]};var a=function(){};a.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule,t.HttpModule],declarations:[o],exports:[o],entryComponents:[],providers:[],schemas:[i.CUSTOM_ELEMENTS_SCHEMA]}]}],a.ctorParameters=function(){return[]},e.FlexibleAutoCompleteComponent=o,e.FlexibleAutoCompleteModule=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=flexible-auto-complete.umd.min.js.map
